{% extends 'base.html' %}
{% block title %} {{t}} {% endblock %}
{% block styles %}
<link rel="stylesheet" href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.css" />
{% endblock styles %}
{% block content %}
<main class="container">
        <div class="row">
           
  <!-- Product Table -->
  <div style="overflow-x:auto;">
    <a href="{% url 'product.add' %}" class="btn btn-primary mt-2">Add New Product</a>
    <h2>Product Table:</h2>
    <form action="{% url 'product'%}" method="POST">
      {% csrf_token %}
      <table class="table" id="example">

   


      <thead>
        <tr>
          <th>Name</th>
          <th>SKU</th>
          <th>Description</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>MRP</th>
          <th>Thumbnail</th>
          <th>Added</th>
          <th>Updated</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>

        <tr>
          {% if not forms.instance.id %}
            {% include 'save.html' %}
          {% endif %}
        </tr>


        {% for product in Products %}

        <tr>
          {% if forms.instance.id == product.id %}
              {% include 'save.html' %}
          {% else %}

          <td>{{ product.name }}</td>
          <td>{{ product.sku }}</td>
          <td>{{ product.description }}</td>
          <td>{{ product.category }}</td>
          <td>{{ product.quantity }}</td>
          <td>{{ product.mrp }}</td>

          {% if not product.thumbnail %}
            <td> No Image Found </td>
          {% else %}
          <td>
            <img src="{{product.thumbnail.url}}" style="width: 50px;"/>
          </td>
          {% endif %}
          <td>{{ product.added }}</td>
          <td>{{ product.updated }}</td>
          <td>
            <button formnovalidate name="edit" value="{{product.id}}" class="btn btn-sm btn-warning">Edit</button>
            <button formnovalidate onclick=" return confirm('do you want to delete?')" 
            name="delete" value="{{product.id}}" class="btn btn-sm btn-danger">Delete</button>
          </td>
          {% endif%}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </form>
  </div>
    </div>
</main>
{% endblock %}
{% block script %}
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.0.2/js/dataTables.js"></script>
<script>
    var table = new DataTable('#example');
</script>
{% endblock %}
